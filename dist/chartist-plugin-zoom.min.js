!function(a,b){"function"==typeof define&&define.amd?define(["chartist"],function(c){return a.returnExportsGlobal=b(c)}):"object"==typeof exports?module.exports=b(require("chartist")):a["Chartist.plugins.zoom"]=b(Chartist)}(this,function(a){return function(a,b,c){"use strict";var d={pointClipOffset:5,noClipY:!1,autoZoomY:{high:!1,low:!1}};c.plugins=c.plugins||{},c.plugins.zoom=function(a){return a=c.extend({},d,a),function(b){function d(a){var b=s(a,y);return b.id=a.identifier,b}function e(a){for(var b=0;b<E.length;b++){if(E[b].id===a)return b}return-1}function f(a){for(var b=a.changedTouches,c=0;c<b.length;c++)E.push(d(b[c]));E.length>1&&(x.attr(r(E[0],E[1])),q(x))}function g(a){for(var b=a.changedTouches,c=0;c<b.length;c++){var f=e(b[c].identifier);E.splice(f,1,d(b[c]))}E.length>1&&(x.attr(r(E[0],E[1])),q(x),a.preventDefault())}function h(a){i(a.changedTouches)}function i(a){for(var b=0;b<a.length;b++){var c=e(a[b].identifier);c>=0&&E.splice(c,1)}}function j(a){E.length>1&&n(r(E[0],E[1])),i(a.changedTouches),p(x)}function k(a){if(0===a.button){var b=s(a,y);l(b,B)&&(C=b,x.attr(r(C,C)),q(x),a.preventDefault())}}function l(a,b){return a.x>=b.x1&&a.x<=b.x2&&a.y>=b.y2&&a.y<=b.y1}function m(b){if(0===b.button&&C){n(r(C,s(b,y))),C=null,p(x)}else a.resetOnRightMouseBtn&&2===b.button&&(F(),b.preventDefault())}function n(c){if(c.width>5&&c.height>5){var d=Math.max(0,c.x-B.x1),e=Math.min(B.width(),d+c.width),f=Math.min(B.height(),B.y1-c.y),g=Math.max(0,f-c.height);if(b.options.axisX.highLow={low:u(d,z),high:u(e,z)},b.options.axisY.highLow={low:u(g,A),high:u(f,A)},a.noClipY&&(a.autoZoomY.high||a.autoZoomY.low)){for(var h=b.options.axisX.highLow.low,i=b.options.axisX.highLow.high,j=null,k=null,l=b.data.series,m=0;m<l.length;++m){for(var n=l[m].data,o=w(n,h)+1,p=o;p<n.length&&!(n[p].x>i);++p)(n[p].y>j||null==k)&&(j=n[p].y),(n[p].y<k||null==k)&&(k=n[p].y);var q=Math.max(o-1,0);k===j&&(j=Math.max(n[o].y,n[q].y),(k=Math.min(n[o].y,n[q].y))==j&&(j=k+.1))}a.autoZoomY.high&&(b.options.axisY.highLow.high=j),a.autoZoomY.low&&(b.options.axisY.highLow.low=k)}b.update(b.data,b.options),D&&D(b,F)}}function o(a){if(C){var b=s(a,y);l(b,B)&&(x.attr(r(C,b)),a.preventDefault())}}function p(a){a.attr({style:"display:none"})}function q(a){a.attr({style:"display:block"})}function r(b,c){var d=b.x,e=b.y,f=c.x-d,g=c.y-e;return f<0&&(f=-f,d=c.x),a.noClipY?(e=B.y2,g=B.y1-e):g<0&&(g=-g,e=c.y),{x:d,y:e,width:f,height:g}}function s(a,b){return t(a.clientX,a.clientY,b)}function t(a,b,c){var d="svg"===c.tagName?c:c.ownerSVGElement,e=d.getScreenCTM(),f=d.createSVGPoint();return f.x=a,f.y=b,(f=f.matrixTransform(e.inverse()))||{x:0,y:0}}function u(a,b){var c=b.bounds.max,d=b.bounds.min;if(b.scale&&"log"===b.scale.type){var e=b.scale.base;return Math.pow(e,a*v(c/d,e)/b.axisLength)*d}return a*b.bounds.range/b.axisLength+d}function v(a,b){return Math.log(a)/Math.log(b)}function w(a,b){for(var c=0,d=a.length-1;c<=d;){var e=d+c>>1;if(b>a[e].x)c=e+1;else{if(!(b<a[e].x))return e;d=e-1}}return c-1}if(b instanceof c.Line){var x,y,z,A,B,C,D=a.onZoom,E=[];!0===a.autoZoomY&&(a.autoZoomY={high:!0,low:!0}),b.on("draw",function(a){var b=a.type,c="point"===b?"point-mask":"line-mask";"line"!==b&&"bar"!==b&&"area"!==b&&"point"!==b||a.element.attr({"clip-path":"url(#"+c+")"})}),b.on("created",function(b){function c(a,b){e.elem("clipPath",{id:a}).elem("rect",{x:B.x1-b,y:B.y2-b,width:i+b+b,height:l+b+b,fill:"white"})}function d(a,b){y.addEventListener(a,b)}z=b.axisX,A=b.axisY,B=b.chartRect,y=b.svg._node,x=b.svg.elem("rect",{x:10,y:10,width:100,height:100},"ct-zoom-rect"),p(x);var e=b.svg.querySelector("defs")||b.svg.elem("defs"),i=B.width(),l=B.height();c("line-mask",0),c("point-mask",a.pointClipOffset),d("mousedown",k),d("mouseup",m),d("mousemove",o),d("touchstart",f),d("touchmove",g),d("touchend",j),d("touchcancel",h)});var F=function(){b.options.axisX.highLow=null,b.options.axisY.highLow=null,b.update(b.data,b.options)}}}}}(window,document,a),a.plugins.zoom});
//# sourceMappingURL=chartist-plugin-zoom.min.js.map